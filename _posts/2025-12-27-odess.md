# 论文阅读笔记：Odess

## 1. 基本信息

* 
**标题**：Odess: Speeding up Resemblance Detection for Redundancy Elimination by Fast Content-Defined Sampling 


* 
**会议**：2021 IEEE 37th International Conference on Data Engineering (ICDE) 


* 
**作者**：Xiangyu Zou, Cai Deng, Wen Xia, 等（哈尔滨工业大学、Dell Technologies 等） 


* 
**核心内容**：提出一种名为 **Odess** 的快速相似性检测方法，通过优化特征生成过程来提升存储系统中数据缩减（Data Reduction）的效率 。



## 2. 研究背景与动机

在海量存储系统中，为了降低成本，通常会结合使用**去重（Deduplication）**和**Delta 压缩（Delta Compression）**技术 。

* 
**现状**：N-Transform 是目前最流行且广泛使用的相似性检测特征生成方法，它生成的特征具有序列敏感性（Sequence-sensitive），检测精度高 。


* 
**痛点**：N-Transform 的计算开销很大，常成为系统吞吐量的瓶颈 。其开销主要来自两部分：


1. 对数据进行滑动窗口计算时的 Rabin 滚动哈希 。


2. 在每个哈希值上应用多次耗时的线性变换（Linear Transforms）来选取特征 。




* 
**现有方案的不足**：另一种方法 Finesse 虽然速度较快，但由于生成的特征序列不敏感，导致检测精度和压缩率较低 。

### 冗余缩减
- 通用压缩：细粒度，窗口小
- 去重：粗粒度，窗口大
- 增量压缩：介于两者之间，依赖于相似性检测

## 3. Odess 核心设计

Odess 旨在结合 N-Transform 的高精度和 Finesse 的高速度 。其主要改进点包括：

### A. 优化表征步骤（Characterizing）

* 
**Gear 哈希**：将传统的 Rabin 滚动哈希替换为更快的 **Gear 哈希** 。Gear 哈希在处理每个字节时所需的计算操作和内存访问更少，能显著降低表征步骤的成本 。



### B. 引入内容定义采样（Content-Defined Sampling, CDS）

* 
**代理哈希集（Proxy Hash Set）**：这是 Odess 最核心的创新 。在进行昂贵的线性变换之前，先通过 CDS 对原始哈希值进行采样，生成一个规模小得多的“代理集”。


* 
**减少计算量**：线性变换只应用在这个缩减后的代理集上 。由于代理集的大小（例如采样率为 1/128）远小于原数据块，从而打破了线性变换步骤的计算瓶颈。


* 
**确定性与相似性保持**：该方法保证了相同的内容始终产生相同的代理集，且相似的内容产生相似的代理集，符合 Broder 定理的要求，确保了检测精度。


*
**odess中的super feature使用方法**：生成12个特征，并按照近期研究的建议划分为3组超级特征。选取首个匹配的数据块作为其增量压缩的基准块，该策略亦称为“首次匹配”(FirstFit)

## 4. 实验结果

论文通过真实世界的数据集评估了 Odess 的表现 ：

* 
**特征生成速度**：Odess 的特征生成速度比 N-Transform 快约 **26.9 倍**，比 Finesse 快约 **5.4 倍** 。


* 
**端到端系统吞吐量**：在集成了去重和 Delta 压缩的系统中，Odess 将系统吞吐量提升了约 **2.76 倍**（相比 N-Transform）和 **1.36 倍**（相比 Finesse） 。


* **压缩比**：
* 维持了与 N-Transform 相当的高压缩率 。


* 比 Finesse 的压缩率高出约 **1.22 倍** 。





## 5. 结论

Odess 通过结合快速的 **Gear 哈希** 和创新的 **内容定义采样（CDS）** 技术，成功解决了相似性检测中的计算瓶颈问题 。它在大幅提升系统处理速度的同时，保留了高精度检测的能力，是存储系统冗余消除领域的一项重要改进 。